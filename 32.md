`requestAnimationFrame` is a browser API that schedules a function to run **right before the next repaint** of the screen. It’s commonly used to optimize animations and UI updates so they feel smooth and efficient.

---

### 🎯 What It Does

When you call:

```ts
requestAnimationFrame(() => {
  setProgress(progressRef.current);
});
```

You're saying:  
> “Wait until the browser is ready to update the screen, then run this.”

This ensures that `setProgress` happens **in sync with the browser’s rendering cycle**, which can reduce jank and improve performance — especially when updating visual components like progress bars.

---

### 🧠 Why Use It for Progress Updates?

- ✅ **Smooth UI**: Avoids rapid-fire updates that can cause flickering or lag.
- ✅ **Efficient rendering**: Batches updates with the browser’s paint cycle.
- ✅ **Better performance**: Especially useful when progress updates happen very frequently (e.g. hundreds of parts uploading).

---

### 🔧 Without `requestAnimationFrame`

```ts
setProgress(percent); // updates immediately
```

This works fine for occasional updates, but if you’re calling it dozens of times per second, it can overwhelm React and the browser.

---

### 📦 Summary

| Feature                  | `requestAnimationFrame` |
|--------------------------|--------------------------|
| Syncs with screen repaint| ✅ Yes                   |
| Reduces UI jank          | ✅ Yes                   |
| Ideal for animations     | ✅ Yes                   |
| Triggers re-render       | ✅ Yes (via `setState`)  |

---

Let me know if you want to animate the progress bar or show estimated time remaining — I can help you build a silky-smooth upload experience.