`requestAnimationFrame` is a browser API that schedules a function to run **right before the next repaint** of the screen. Itâ€™s commonly used to optimize animations and UI updates so they feel smooth and efficient.

---

### ğŸ¯ What It Does

When you call:

```ts
requestAnimationFrame(() => {
  setProgress(progressRef.current);
});
```

You're saying:  
> â€œWait until the browser is ready to update the screen, then run this.â€

This ensures that `setProgress` happens **in sync with the browserâ€™s rendering cycle**, which can reduce jank and improve performance â€” especially when updating visual components like progress bars.

---

### ğŸ§  Why Use It for Progress Updates?

- âœ… **Smooth UI**: Avoids rapid-fire updates that can cause flickering or lag.
- âœ… **Efficient rendering**: Batches updates with the browserâ€™s paint cycle.
- âœ… **Better performance**: Especially useful when progress updates happen very frequently (e.g. hundreds of parts uploading).

---

### ğŸ”§ Without `requestAnimationFrame`

```ts
setProgress(percent); // updates immediately
```

This works fine for occasional updates, but if youâ€™re calling it dozens of times per second, it can overwhelm React and the browser.

---

### ğŸ“¦ Summary

| Feature                  | `requestAnimationFrame` |
|--------------------------|--------------------------|
| Syncs with screen repaint| âœ… Yes                   |
| Reduces UI jank          | âœ… Yes                   |
| Ideal for animations     | âœ… Yes                   |
| Triggers re-render       | âœ… Yes (via `setState`)  |

---

Let me know if you want to animate the progress bar or show estimated time remaining â€” I can help you build a silky-smooth upload experience.