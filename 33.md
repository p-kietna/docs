Perfect â€” if you want `setProgress` to update **only once per second**, even while parts are uploading rapidly, you can use a **throttling mechanism**. Here's a clean way to do it using `setTimeout` and `useRef`:

---

### âœ… Throttle `setProgress` to Once Per Second

```tsx
import { useRef, useState, useEffect } from 'react';

const [progress, setProgress] = useState(0);
const progressRef = useRef(0);
const throttleTimer = useRef<NodeJS.Timeout | null>(null);

const updateProgress = (count: number, partCount: number) => {
  const percent = Math.round((count / partCount) * 100);
  progressRef.current = percent;

  if (!throttleTimer.current) {
    throttleTimer.current = setTimeout(() => {
      setProgress(progressRef.current); // update UI once per second
      throttleTimer.current = null;
    }, 1000);
  }
};
```

---

### ðŸ§  How It Works

- `progressRef` holds the latest progress value.
- `throttleTimer` ensures `setProgress` is only called once per second.
- Even if `updateProgress` is called 100 times in a second, the UI only updates once.

---

### ðŸ§¹ Optional Cleanup

If your component unmounts during upload, add this to `useEffect`:

```tsx
useEffect(() => {
  return () => {
    if (throttleTimer.current) {
      clearTimeout(throttleTimer.current);
    }
  };
}, []);
```

---

Let me know if you want to animate the progress bar or show estimated time remaining â€” I can help you make it feel buttery smooth.